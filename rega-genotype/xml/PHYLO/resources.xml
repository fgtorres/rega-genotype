<?xml version="1.0" encoding="UTF-8"?>
<messages>
	<message id="main">
		<div class="azure">
			<div class="rivm-header">
				<div id="logo">
					<a href="${app.url}">
						<img src="${app.url}/../../pics/hiv/header.gif" alt="HPV tool Logo" > </img>
					</a>
				</div>
				<div id="application">
					<span id="name">HIV Phylotyping v1 Tool</span>
					<span id="info">Version 0.1</span>
				</div>
				<div class="nav_bar">
					${navigation class="nav_main"}
				</div>
				
				<div id="navigation-bottom" >
				</div>
			</div>
			${content class="content"}
	
			<div class="footer">
				<p>Developed by: <a href="http://www.bioafrica.net">BioAfrica</a> (Rob Gifford, Tulio and Josh)
					and <a href="http://www.emweb.be/">Emweb bvba</a>.</p>
			    <p>Contact: TBD</p>
			</div>
	
			<div class="rivm-footer">
				<div>
					<img src="${app.url}/../../pics/rivm/footer.png" > </img>
				</div>
			</div>
		</div>
	</message>

  	<message id="start-form">
  		<div class="start-form form">
		    <h1>Phylotyping HIV Tool Version 1.0</h1>
		    <div class="note">
 				<div>
					This tool is designed to use phylogenetic methods in order to identify the HIV-1 genotype of a nucleotide sequence.
				</div>
      			<div>
      				<b>Note for batch analysis:</b> The genotypetool accepts up to ${maxAllowedSeqs} sequences at a time. 
				</div>
	 	   </div>
	 	   
	 	   <div class="seqInput">
				${tr:sequenceInput.inputSequenceInFastaFormat}
				<div>
					${fasta-field}
				</div>
				${analyze-button}
				${clear-button}
				${error-text class="error"}
		
				${tr:sequenceInput.uploadSequenceInFastaFormat}

				${file-upload-button}

				${tr:startForm.monitorJob}

				${tr:startForm.labelJobId} ${job-id-field}	${search-button}
			</div>
		</div>
	</message>
	
	<message id="sequenceInput.run">Start!</message>
	<message id="startForm.monitor">Go!</message>
	<message id="sequenceInput.example">&gt;test
ACTCAGATTGGTTGTACTTTAAATTTTCCAATTAGTCCTATTGAAACTGT
ACCAGTAAAATTAAAGCCAGGAATGGATGGTCCAAAGGTTAAACAATGGC
CATTGACAGAAGAGAAAATAAAAGCTTTAACAGAAATTTGTACAGAAATG
GAAAAGGAAGGAAAAATTTCAAAAATCGGACCTGAAAATCCATACAACAC
TCCAATATTTGCCATAAAGAAAAAAGACAGTACTAAATGGAGAAAATTGG
TAGATTTCAGAGAGCTCAATAAAAGAACTCAAGACTTCTGGGAGGTCCAA
TTAGGAATACCTCATCCCTCGGGGTTAAAAAAGAAAAAATCAGTAACAGT
GCTAGATGTGGGGGATGCATACTTTTCAGTGCCCTTAGATGAAAGCTTTA
GAAAGTATACTGCATTCACTATACCTAGTACAAATAATGAGACACCAGGG
ATTAGATATCAGTACAATGTGCTTCCACAGGGATGGAAAGGATCACCAGC
AATATTTCAAAGTAGCATGACAAAAATCTTAGAGCCCTTTAGAATAAAAA
ATCCAGAAATAGTGATCTACCAATATATGGATGATTTATATGTAGGATCT
GACTTAGAAATAGGGCAGCATAGAGCAAAAATAGAGGAGTTAAGAAAACA
TCTGTTAAGCTGGGGGTTTACCACACCAGATAAAAAACATCAGAAAGAAC
CTCCATTCCTTTGGATGGGCTATGAGCTCCATCCTGACAAATGGACAGTA
CAACCTATACAGCTGCCAGACAAAGAAAGCTGGACTGTCAACGATATACA

	</message>

	<message id="job-overview-form">
	  	<div class="monitor-form form">
		    <h1>Phylotyping HIV Tool Results</h1>

		    <div class="info">
				<p>You may bookmark this page to revisit results of this job (${job-id}) later.</p>
				
				<p>${analysis-cancelled}</p>

				<div class="analysisProgress">
					${analysis-in-progress}
				</div>
			</div>

			<div>
				${results class="jobTable"}
			</div>

			<div class="downloads">
				${downloads}
			</div>
		</div>
	</message>

  	<message id="details-form">
		<h1>HIV-1 Genotyping Details</h1>
		${details-form}
	</message>
  
  	<message id="generic-details">
  		<div>
  			<div>
  				<div>
					  <div class="dsa-text">
						<span class="label">Name:</span> ${xpath "/genotype_result/sequence/@name"}
						<span class="label">Length:</span> ${xpath "/genotype_result/sequence/@length"}
					</div>
				</div>
				<div>
					<h3>Genogroup assignment</h3>
					<p>
						<span class="label">Genogroup assignment:</span> ${xpath "/genotype_result/sequence/result[@id='blast']/cluster/concluded-name"}
					</p>
					<p>
						<span class="label"></span>
					</p>
				</div>
				<div>
					<h3>Genotype result</h3>
					<p>
						<span class="label">Genotype assignment:</span>
						<span class="nov-genotype">${xpath "/genotype_result/sequence/conclusion[@id='type']/assigned/name"}</span>
						<span>${xpath "/genotype_result/sequence/conclusion[@id='type']/assigned/description"}</span>
											</p>
  					<p>
  						<span class="label"></span>
  						<span>${xpath "/genotype_result/sequence/conclusion[@id='type']/motivation"}</span>
					</p>


					${eval-xpath "/genotype_result/sequence/conclusion[@type='simple' and @id='type']"}
					${<if-defined>}
					    <p>
   							<span class="label">Sub-clustering:</span>
							${eval-xpath "/genotype_result/sequence/conclusion[@id='subtype']"}
							${<if-defined>}
								${eval-xpath "/genotype_result/sequence/conclusion[@type='simple' and @id='subtype']"}
	   							<span class="nov-genotype">
									${<if-defined>}
		   								${xpath "/genotype_result/sequence/conclusion[@id='type']/assigned/name"}
									${</if-defined>}
									${xpath "/genotype_result/sequence/conclusion[@id='subtype']/assigned/name"}
								</span>
							${</if-defined>}
							${<if-not-defined>}
								<span class="nov-genotype">N/A</span>
							${</if-not-defined>}
	  					</p>
						<p>
   							<span class="label"></span>
							${eval-xpath "/genotype_result/sequence/conclusion[@id='subtype']"}
							${<if-defined>}
	   							<span>${xpath "/genotype_result/sequence/conclusion[@id='subtype']/motivation"}</span>
   							${</if-defined>}
   							${<if-not-defined>}
   								<span>Sequence does not sufficiently overlap with region or subcluster is not available for the type</span>
   							${</if-not-defined>}
						</p>
	  				${</if-defined>}
 
 				</div>
 				<div>
 					<h3>Genome region</h3>
 				</div>
 				
 				${genome-img}

 				<div>
					<p class="refseq">
   						Your sequence starts at position ${xpath "/genotype_result/sequence/result[@id='blast']/start"} and finishes at position ${xpath "/genotype_result/sequence/result[@id='blast']/end"} relative to the ${xpath "/genotype_result/sequence/result[@id='blast']/refseq"} reference sequence.
					</p>
				</div>
			</div>
		</div>
	</message>
  
  	<message id="details.phylo-major.title">
  		Pylogenetic Analysis Details
  	</message>

  	<message id="details.phylo-minor.title">
  		Pylogenetic Analysis Details (Sub-clustering)
  	</message>
  
	<message id="job-overview-downloads">
		<div class="downloadContainer">
			<span>Download results:</span> ${xml-file} ${xls-file} ${csv-file} ${fasta-file}
		</div>
	</message>
	
	<message id="monitorForm.analysisCancelled"><p><b>This job was cancelled!</b></p></message>

	<message id="tool.title">Phylotyping HIV Tool</message>

	<message id="table.header.name">Name</message>
	<message id="table.header.length">Length</message>
	<message id="table.header.blast">Blast</message>
	<message id="table.header.phylo">Phylo</message>
	<message id="table.header.report">Report</message>
	<message id="table.header.genome">Genome</message>

	<message id="how-to-cite-doc">
		<div class="form">
			<h1>How to Cite the Phylotyping Automated Genotyping Tool</h1>

			<p>Manuscript in preparation</p>
		</div>
	</message>
	

	<message id="introduction-doc">
		<div class="form">
			<h1>The HIV-1 Automated Genotyping Tool: introduction.</h1>

	        <p>This typingtool offers quick and unequivocal typing of HIV-1 sequences.</p>
	       	<p>
	       		With this tool sequences of any part of the hepatitis A (HAV) genome can be assigned to
	       	   	a HAV genotype. Sequences of other Picornaviridae are also recognized by the tool and are assigned to their genus.
	       	</p>
	       	<p>
	       		The sequences used as references in this tool originate from:
	       	   	The Hepatitis A network (<a href="http://www.rivm.nl/en/Topics/H/HAVNET">HAVnet</a>)
	       	   	and <a href="http://www.ncbi.nlm.nih.gov/Genbank">Genbank</a>.
	       	</p>
      </div>
	</message>
      
    <message id="how-to-use-doc">
		<div class="form">
			<h1>HIV-1 Genotyping Tutorial</h1>
			
			<p>
				One or more (up to 20.000 per run) HAV sequences can be pasted (A) or uploaded (B) in Fasta format (see Fig. 1).
			 	Sequences of all regions of the HAV genome can be used.
			</p>
			<p>
				When pasting a single sequence the Identifier of the sequence (>Sequencename) should be included (Fasta format).
				One example sequence is present as a default. A set of <a href="#/examples">three example sequences</a> is also available.
			</p> 

			<p style="text-align: center; margin: 20px 0px">
				<img src="/mpf/pics/hav/FigEntry.png"></img> <br/>				
				Fig. 1. The startingpage of the HAV typingtool
			</p>

			<p>
				The analysis takes up to a few seconds per sequence. Thus, for large batches the run can be viewed later,
				by typing the Job-Id at C. Here also runs by others can be viewed, if the Job-Id has been communicated.
				Runs are kept on the server for 1 week.
			</p> 

			<p style="text-align: center; margin: 20px 0px">
				<img src="/mpf/pics/hav/FigResults.png"></img> <br/>				
				Fig. 2. Overview of the results
			</p>

			<p>
				After the 'Start' button is pushed the analysis is started and after a few seconds the results overview is shown (Fig. 2).
				While the analysis is still in progress the following message is displayed: 'Analysis in progress... (Showing partial results).
				This page will be automatically updated every 5 seconds...'.
			</p>

			<p>
				The Job Id number, which can be used to retrieve the results later is displayed at the top of the page as soon as the job is started.
				<br/>
				For each sequence the length, positioning on the HAV genome and assigned genotype are determined.<br/>
				After the complete analysis is finished the analysis results can be downloaded as XML, CSV or Excel file.<br/>
				For each sequence more details can be viewed in the individual reports by clicking on 'report' in the results table.<br/>
			</p>
			
			<p>
				The report of the genotyping details per sequence contains a brief overview of the assignment, followed by details of the phylogenetic
				analysis including a phylogenetic tree.<br/>
				The report contains information on:
				<ul>
					<li>The sequence submitted (name and length)</li>
					<li>Blast result: The genus/species (HAV species or other picornavirus genus) of the submitted sequence</li>
					<li>Phylo result: For HAV sequences, the genotype assignment</li>
					<li>The robustness of the phylogenetic assignment using bootstrap values. Only with bootstrap > 70 a genotype
						or variant is assigned.</li>
					<li>A graphical representation of the HAV genome showing the genomic region of the query sequence with the start and
						end positions related to the HAV reference sequence (NC_001489, complete genome, genotype IB).</li>
					<li>A NJ tree is computed with the submitted sequence at the top.</li>
					<li>The bootstrap tree can be viewed and downloaded in the PAUP* log file</li>
					<li>The alignment can be downloaded in NEXUS or FASTA format</li>
				</ul>
			</p>

			<p>
				No genotype is assigned if:
				<ul>
					<li>The submitted sequence belongs to another Picornavirus genus. In this case the genus is indicated and the analysis stops.</li>
					<li>The submitted sequence is shorter than 100 bp. In this case only assignment of the species is possible.</li>
					<li>The bootstrap value &lt; 70. In this case an alignment and a NJ tree are produced which can be used to get an indication of
						the phylogeny.</li>
				</ul>
			</p> 
		</div>
    </message>

 	<message id="examples-doc">
		<div class="form">
			<h1>Example Sequences for the Hepatitis A Genotyping Tool</h1>

	        <div class="sequenceName">&gt;EU416252</div>
			<div class="sequence">
aatcactctgatgaatatttgtcttttagttgttatttgtctgtcacagaacaatcagagttttatttt
cccagagctccattgaattcaaatgccatgttatccactgaatcaatgataagcagaattgcagctgga
gacttggagtcatcagtggatgatcccagatcagaggaggacagaagatttgagagtcacatagaatgc
aggaagccatataaagaattgagattagaagttgggaaacaaagactcaagtatgctcaggaggaattg
tcaaatgaagtacttccacctcctaggaaaatgaagggactgttttcacaagccaaaatttctcttttt<br/>
tat
	        </div>
	        
	        <div class="sequenceName">&gt;AJ437155</div>
			<div class="sequence">
gttggagacgattcaggaggtttttcaacaacagtttccacagagcagaatgttcccgatccccaagtt
ggcataacaactatgagggacttaaaaggtaaagccaataggggaaagatggatgtttcaggagtgcaa
gcacctgtgggagctattacaacaattgaggatccagttttagctaagaaagtacctgagacatttcct
gaattgaagcctggagagtctagacatacatcagatcacatgtctatttataaattcatggggaggtct
cattttctgtgtacttttacttttaattcaaataataaagagtatacattcccaataacgttgtcttcg
acttctaatcctcctcatggtttaccatcaacattaaggtggtttttcaatttgtttcagttgtataga
ggaccattggatttgacaattattatcacaggagccactgatgtggatgggatggcttggtttactcca
gtaggccttgctgtcgacaccccttgggtagaaaaggagtcagctctgtctattgattataaaactgcc
cttggagctgttagatttaatacaagaagaacggggaacattcagattagattgccatggtattcttac
ttgtatgccgtgtctggagcactggatggcctgggagataaaacagattctacatttggattggtttct
attcagattgcaaattacaaccattctgatgaatatttgtcttttagttgttatttgtctgttacagaa
caatcagagttctattttcctagagctccattgaattcaaatgctatgttgtccactgagtccatgatg
agtagaattgcagctggagacttggagtcatcagtggatgatcctagatcagaggaggatagaagattt<br/>
gaa 
	        </div>
	        
	        <div class="sequenceName">&gt;L20531</div>
			<div class="sequence">
gagtccatgatgagtagaattgcagctggagacttggagtcatcagtggatgatcctagatcagaggag
gacagaagatttgagagtcatatagaatgtaggaaaccatacaaggaattgagattggaggttggcaaa
caaagactcaaatatgctcaggaagagttg 
			</div>
    	</div>
  	</message>
</messages>
